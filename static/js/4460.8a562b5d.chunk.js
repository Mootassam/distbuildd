"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[4460],{89994:function(n,e,t){var r=t(42982),a=t(6473),i=t(10499),l=t(70816),o=t.n(l),u={generic:function(n){return a.nK().label(n)},string:function(n,e){e=e||{};var t=a.Z_().transform((function(n,e){return""===e?null:n})).nullable(!0).trim().label(n);return e.required&&(t=t.required()),(e.min||0===e.min)&&(t=t.min(e.min)),e.max&&(t=t.max(e.max)),e.matches&&(t=t.matches(e.matches)),t},boolean:function(n,e){return a.Xg().default(!1).label(n)},relationToOne:function(n,e){e=e||{};var t=a.nK().nullable(!0).label(n).transform((function(n,e){return e?e.id:null}));return e.required&&(t=t.required()),t},stringArray:function(n,e){e=e||{};var t=a.IX().compact().ensure().of(a.Z_().transform((function(n,e){return""===e?null:n})).trim()).label(n);return(e.required||e.min)&&(t=t.required()),e.min||0===e.min?t=t.min(e.min):e.required&&(t=t.min(1)),e.max&&(t=t.max(e.max)),t},relationToMany:function(n,e){e=e||{};var t=a.IX().nullable(!0).label(n).transform((function(n,e){return e&&e.length?e.map((function(n){return n.id})):[]}));return(e.required||e.min)&&(t=t.required()),e.min||0===e.min?t=t.min(e.min):e.required&&(t=t.min(1)),e.max&&(t=t.max(e.max)),t},integer:function(n,e){e=e||{};var t=a.Rx().transform((function(n,e){return""===e?null:n})).integer().nullable(!0).label(n);return e.required&&(t=t.required()),(e.min||0===e.min)&&(t=t.min(e.min)),e.max&&(t=t.max(e.max)),t},images:function(n,e){e=e||{};var t=a.IX().nullable(!0).label(n);return(e.required||e.min)&&(t=t.required()),e.min||0===e.min?t=t.min(e.min):e.required&&(t=t.min(1)),e.max&&(t=t.max(e.max)),t},files:function(n,e){e=e||{};var t=a.IX().compact().ensure().nullable(!0).label(n);return(e.required||e.min)&&(t=t.required()),e.min||0===e.min?t=t.min(e.min):e.required&&(t=t.min(1)),e.max&&(t=t.max(e.max)),t},enumerator:function(n,e){e=e||{};var t=a.Z_().transform((function(n,e){return""===e?null:n})).label(n).nullable(!0).oneOf([null].concat((0,r.Z)(e.options||[])));return e.required&&(t=t.required((0,i.ag)("validation.string.selected"))),t},email:function(n,e){e=e||{};var t=a.Z_().transform((function(n,e){return""===e?null:n})).nullable(!0).trim().label(n).email();return e.required&&(t=t.required()),(e.min||0===e.min)&&(t=t.min(e.min)),e.max&&(t=t.max(e.max)),e.matches&&(t=t.matches(e.matches)),t},decimal:function(n,e){e=e||{};var t=a.Rx().transform((function(n,e){return""===e?null:n})).nullable(!0).label(n);return e.required&&(t=t.required()),(e.min||0===e.min)&&(t=t.min(e.min)),e.max&&(t=t.max(e.max)),t},datetime:function(n,e){e=e||{};var t=a.nK().nullable(!0).label(n).transform((function(n,e){return n?o()(e,"YYYY-MM-DD HH:mm").toISOString():null}));return e.required&&(t=t.required()),t},date:function(n,e){e=e||{};var t=a.nK().nullable(!0).label(n).test("is-date",(0,i.ag)("validation.mixed.default"),(function(n){return!n||o()(n,"YYYY-MM-DD").isValid()})).transform((function(n){return n?o()(n).format("YYYY-MM-DD"):null}));return e.required&&(t=t.required()),t}};e.Z=u},98040:function(n,e,t){var r=t(76747),a=function(n){return n.tenant.form},i=(0,r.P1)([a],(function(n){return n.record})),l={selectInitLoading:(0,r.P1)([a],(function(n){return Boolean(n.initLoading)})),selectSaveLoading:(0,r.P1)([a],(function(n){return Boolean(n.saveLoading)})),selectRecord:i,selectRaw:a};e.Z=l},44460:function(n,e,t){t.r(e),t.d(e,{default:function(){return T}});var r=t(70885),a=t(10499),i=t(926),l=t(86495),o=t(47313),u=t(45788),s=t(32377),c=t(37078),d=t(11581),m=t(94827),f=t(1413),g=t(43270),h=t(89994),v=t(51853),b=t(98040),p=t(47575),x=t(6473),Z=t(86430);var j=t(1354),q=t(67357),y=t(46417),w=x.Ry().shape({name:h.Z.string((0,a.ag)("tenant.fields.tenantName"),{required:!0,max:50}),url:h.Z.string((0,a.ag)("tenant.fields.tenantUrl"),{required:!0,max:50}).matches(/^[a-z0-9][-a-zA-Z0-9]*$/,(0,a.ag)("tenant.validation.url"))}),C=x.Ry().shape({name:h.Z.string((0,a.ag)("tenant.fields.tenantName"),{required:!0,max:50})}),k=j.w.isEnabled?w:C;var N=function(n){var e=(0,u.I0)(),t=(0,o.useState)({name:""}),i=(0,r.Z)(t,1)[0],s=(0,g.cI)({resolver:(0,q.X)(k),mode:"onSubmit",defaultValues:i}),c=(0,u.v9)(b.Z.selectSaveLoading),d=(0,u.v9)(l.Z.selectInvitedTenants);return(0,y.jsx)(g.RV,(0,f.Z)((0,f.Z)({},s),{},{children:(0,y.jsxs)("form",{onSubmit:s.handleSubmit((function(n){e(v.Z.doCreate(n))})),children:[(0,y.jsx)(p.Z,{name:"name",label:(0,a.ag)("tenant.fields.tenantName"),autoComplete:"name",onChange:function(n){s.setValue("url",n.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-"))},autoFocus:!0}),j.w.isEnabled&&(0,y.jsx)(p.Z,{name:"url",placeholder:(0,a.ag)("tenant.fields.tenantUrl"),endAdornment:".".concat(Z.default.frontendUrl.host)}),(0,y.jsx)("button",{style:{marginTop:"16px"},type:"submit",className:"btn btn-primary btn-block",disabled:c,children:(0,a.ag)("tenant.create.button")}),Boolean(d.length)&&(0,y.jsx)("button",{style:{marginTop:"16px"},type:"button",className:"btn btn-light btn-block",onClick:n.onViewToggle,children:(0,a.ag)("tenant.invitation.view")})]})}))},S=t(28769),I=t(10546),B=t(5544),M=x.Ry().shape({id:h.Z.string((0,a.ag)("tenant.fields.tenantId"))});var V=function(n){var e=(0,u.I0)(),t=(0,u.v9)(I.Z.selectLoading),i=(0,u.v9)(l.Z.selectInvitedTenants),s=(0,u.v9)(l.Z.selectCurrentUser),c=(0,o.useState)({id:i[0].id}),d=(0,r.Z)(c,1)[0],m=(0,g.cI)({resolver:(0,q.X)(M),mode:"onSubmit",defaultValues:d});return(0,y.jsx)(g.RV,(0,f.Z)((0,f.Z)({},m),{},{children:(0,y.jsxs)("form",{onSubmit:m.handleSubmit((function(n){var t=n.id,r=s.tenants.find((function(n){return n.tenant.id===t}));e(S.Z.doAccept(r.invitationToken))})),children:[(0,y.jsx)(B.Z,{name:"id",label:(0,a.ag)("tenant.fields.tenantId"),options:i.map((function(n){return{value:n.id,label:n.name}}))}),(0,y.jsx)("button",{style:{marginTop:"16px"},type:"submit",className:"btn btn-primary btn-block",disabled:t,children:(0,a.ag)("tenant.invitation.accept")}),(0,y.jsx)("button",{style:{marginTop:"16px"},type:"button",className:"btn btn-light btn-block",onClick:n.onViewToggle,children:(0,a.ag)("tenant.new.title")})]})}))};var T=function(){var n=(0,o.useState)("form"),e=(0,r.Z)(n,2),t=e[0],f=e[1],g=(0,u.I0)(),h=(0,u.v9)(l.Z.selectInvitedTenants),v=(0,u.v9)(l.Z.selectBackgroundImageUrl),b=(0,u.v9)(l.Z.selectLogoUrl);(0,o.useEffect)((function(){f(h.length?"select":"form")}),[h]);var p=function(){f((function(n){return"form"===n?"select":"form"}))};return(0,y.jsx)(m.Z,{style:{backgroundImage:"url(".concat(v||"/images/tenant.jpg",")")},children:(0,y.jsxs)(s.Z,{children:[(0,y.jsx)(c.Z,{children:b?(0,y.jsx)("img",{src:b,width:"240px",alt:(0,a.ag)("app.title")}):(0,y.jsx)("h1",{children:(0,a.ag)("app.title")})}),"form"===t?(0,y.jsx)(N,{onViewToggle:p}):(0,y.jsx)(V,{onViewToggle:p}),(0,y.jsx)(d.Z,{children:(0,y.jsx)("button",{className:"btn btn-sm btn-link",type:"button",onClick:function(){g(i.Z.doSignout())},children:(0,a.ag)("auth.signout")})})]})})}},32377:function(n,e,t){var r,a=t(30168),i=t(38269).ZP.div(r||(r=(0,a.Z)(["\n  width: 500px;\n  height: 100%;\n  min-height: 100%;\n  overflow-y: auto;\n  z-index: 1;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: 56px 40px;\n  position: relative;\n  background-color: rgba(0, 0, 0, 0.8);\n  color: white;\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    color: white;\n  }\n\n  h4 {\n    font-size: 1.25em;\n  }\n\n  a,\n  a:hover {\n    color: white;\n  }\n\n  .btn-link,\n  .btn-link:hover {\n    color: white;\n  }\n\n  .invalid-feedback {\n    display: block;\n  }\n\n  @media only screen and (max-width: 767px) {\n    width: 100%;\n  }\n"])));e.Z=i},37078:function(n,e,t){var r,a=t(30168),i=t(38269).ZP.div(r||(r=(0,a.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 48px;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  color: white;\n\n  h1 {\n    margin-bottom: 0;\n  }\n"])));e.Z=i},11581:function(n,e,t){var r,a=t(30168),i=t(38269).ZP.div(r||(r=(0,a.Z)(["\n  margin-top: 24px;\n  text-align: center;\n"])));e.Z=i},94827:function(n,e,t){var r,a=t(30168),i=t(38269).ZP.div(r||(r=(0,a.Z)(["\n  width: 100%;\n  min-height: 100vh;\n  height: 100vh;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  position: relative;\n  background-size: cover;\n\n  &:before {\n    content: '';\n    width: 100%;\n    height: 100%;\n    display: flex;\n    background-color: rgba(0, 0, 0, 0.5);\n    position: absolute;\n    z-index: 1;\n    top: 0;\n  }\n"])));e.Z=i},49384:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(15671),a=t(43144),i=function(){function n(){(0,r.Z)(this,n)}return(0,a.Z)(n,null,[{key:"errorMessage",value:function(n,e,t,r){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(i)return i;if(!r&&!t[n])return null;var l=e[n];return(null===l||void 0===l||null===(a=l[0])||void 0===a?void 0:a.message)||(null===l||void 0===l?void 0:l.message)||l||null}}]),n}()},47575:function(n,e,t){t(47313);var r=t(43270),a=t(49384),i=t(46417);function l(n){var e=n.label,t=n.description,l=n.name,o=n.hint,u=n.type,s=n.placeholder,c=n.autoFocus,d=n.autoComplete,m=n.required,f=n.externalErrorMessage,g=n.disabled,h=n.endAdornment,v=(0,r.Gc)(),b=v.register,p=v.errors,x=v.formState,Z=x.touched,j=x.isSubmitted,q=a.Z.errorMessage(l,p,Z,j,f);return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("div",{className:h?"input-group":"",children:[Boolean(e)&&(0,i.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:l,children:e}),t,(0,i.jsx)("input",{id:l,name:l,type:u,ref:b,onChange:function(e){n.onChange&&n.onChange(e.target.value)},onBlur:function(e){n.onBlur&&n.onBlur(e)},placeholder:s||void 0,autoFocus:c||void 0,autoComplete:d||void 0,disabled:g,className:"form-control ".concat(q?"is-invalid":"")}),h&&(0,i.jsx)("div",{className:"input-group-append",children:(0,i.jsx)("span",{className:"input-group-text",children:h})})]}),(0,i.jsx)("div",{className:"invalid-feedback",children:q}),Boolean(o)&&(0,i.jsx)("small",{className:"form-text text-muted",children:o})]})}l.defaultProps={type:"text",required:!1},e.Z=l},5544:function(n,e,t){var r=t(1413),a=t(47313),i=t(73622),l=t(10499),o=t(43270),u=t(49384),s=t(46417);function c(n){var e=n.label,t=n.name,c=n.hint,d=n.options,m=n.required,f=n.mode,g=n.placeholder,h=n.isClearable,v=n.externalErrorMessage,b=(0,o.Gc)(),p=b.register,x=b.errors,Z=b.formState,j=Z.touched,q=Z.isSubmitted,y=b.setValue,w=b.watch,C=u.Z.errorMessage(t,x,j,q,v),k=w(t);(0,a.useEffect)((function(){p({name:t})}),[p,t]);var N=function(){return k?k.map((function(n){return d.find((function(e){return e.value===n}))})):[]},S=function(){var e=n.options;return null!=k?e.find((function(n){return n.value===k})):null},I=function(e){if(!e)return y(t,[],{shouldValidate:!0,shouldDirty:!0}),void(n.onChange&&n.onChange([]));var r=e.map((function(n){return n?n.value:n})).filter((function(n){return null!=n}));y(t,r,{shouldValidate:!0,shouldDirty:!0}),n.onChange&&n.onChange(r)},B=function(e){if(!e)return y(t,null,{shouldValidate:!0,shouldDirty:!0}),void(n.onChange&&n.onChange(null));y(t,e.value,{shouldValidate:!0,shouldDirty:!0}),n.onChange&&n.onChange(e.value)},M=Boolean(C)?{container:function(n){return(0,r.Z)((0,r.Z)({},n),{},{color:"hsl(0,0%,20%)"})},control:function(n){return(0,r.Z)((0,r.Z)({},n),{},{borderColor:"red"})}}:{container:function(n){return(0,r.Z)((0,r.Z)({},n),{},{color:"hsl(0,0%,20%)"})}};return(0,s.jsxs)("div",{className:"form-group",children:[Boolean(e)&&(0,s.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:e}),(0,s.jsx)("br",{}),(0,s.jsx)(i.ZP,{className:"w-100",value:"multiple"===n.mode?N():S(),onChange:function(e){return"multiple"===n.mode?I(e):B(e)},onBlur:function(e){n.onBlur&&n.onBlur(e)},id:t,name:t,options:d,isMulti:"multiple"===f,placeholder:g||"",isClearable:h,styles:M,loadingMessage:function(){return(0,l.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,l.ag)("autocomplete.noOptions")}}),(0,s.jsx)("div",{className:"invalid-feedback",children:C}),Boolean(c)&&(0,s.jsx)("small",{className:"form-text text-muted",children:c})]})}c.defaultProps={required:!1,isClearable:!0},e.Z=c},73622:function(n,e,t){t(47313),t(83235),t(1168);var r=t(85732),a=(t(96312),t(71902),t(87201));t(94297);var i=(0,a.m)(r.S);e.ZP=i}}]);