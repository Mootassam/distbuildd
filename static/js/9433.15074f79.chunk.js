"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[9433],{93184:function(e,n,t){var a=t(76747),r=t(86495),s=t(26319),o=t(71945),l=(0,a.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsRead)})),i=(0,a.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsEdit)})),u=(0,a.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsCreate)})),c=(0,a.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsImport)})),d={selectPermissionToRead:l,selectPermissionToEdit:i,selectPermissionToCreate:u,selectPermissionToDestroy:(0,a.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(e,n){return new s.Z(e,n).match(o.Z.values.couponsDestroy)})),selectPermissionToImport:c};n.Z=d},46952:function(e,n,t){var a=t(1413),r=t(70885),s=t(47313),o=t(43270),l=t(10499),i=t(89994),u=t(95748),c=t(68160),d=t(6473),m=t(67357),f=t(47575),h=t(21538),p=t(5544),g=t(35482),v=t(46417),b=d.Ry().shape({title:i.Z.string((0,l.ag)("entities.coupons.fields.title"),{required:!0}),codeName:i.Z.string((0,l.ag)("entities.coupons.fields.codeName"),{}),discount:i.Z.decimal((0,l.ag)("entities.coupons.fields.discount"),{required:!0}),noOfTimes:i.Z.integer((0,l.ag)("entities.coupons.fields.noOfTimes"),{required:!0}),status:i.Z.enumerator((0,l.ag)("entities.coupons.fields.status"),{options:g.Z.status}),type:i.Z.enumerator((0,l.ag)("entities.coupons.fields.type"),{required:!0,options:g.Z.type})});n.Z=function(e){var n=(0,s.useState)((function(){var n=e.record||{};return{title:n.title,codeName:n.codeName,discount:n.discount,noOfTimes:n.noOfTimes,type:n.type}})),t=(0,r.Z)(n,1)[0],i=(0,o.cI)({resolver:(0,m.X)(b),mode:"all",defaultValues:t}),d=function(n){var t;e.onSubmit(null===(t=e.record)||void 0===t?void 0:t.id,n)};return(0,v.jsx)(c.Z,{children:(0,v.jsx)(o.RV,(0,a.Z)((0,a.Z)({},i),{},{children:(0,v.jsxs)("form",{onSubmit:i.handleSubmit(d),children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(f.Z,{name:"title",label:(0,l.ag)("entities.coupons.fields.title"),required:!0,autoFocus:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(h.Z,{name:"noOfTimes",label:(0,l.ag)("entities.coupons.fields.noOfTimes"),required:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(p.Z,{name:"type",label:(0,l.ag)("entities.coupons.fields.type"),options:g.Z.type.map((function(e){return{value:e,label:(0,l.ag)("entities.coupons.enumerators.type.".concat(e))}})),required:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(f.Z,{name:"discount",label:(0,l.ag)("entities.coupons.fields.discount"),required:!0})})]}),(0,v.jsxs)("div",{className:"form-buttons",children:[(0,v.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:i.handleSubmit(d),children:[(0,v.jsx)(u.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,l.ag)("common.save")]}),(0,v.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(t).forEach((function(e){i.setValue(e,t[e])}))},children:[(0,v.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,l.ag)("common.reset")]}),e.onCancel?(0,v.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,v.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,l.ag)("common.cancel")]}):null]})]})}))})}},49513:function(e,n,t){var a=t(1413),r=t(42982),s=t(74165),o=t(15861),l=t(70885),i=t(47313),u=t(49384),c=t(73622),d=t(10499),m=t(43270),f=t(35487),h=t.n(f),p=t(46417);function g(e){var n=(0,m.Gc)(),t=n.errors,f=n.watch,g=n.setValue,v=n.register,b=n.formState,x=b.touched,Z=b.isSubmitted,j=e.label,N=e.name,y=e.hint,C=e.placeholder,I=e.autoFocus,S=e.externalErrorMessage,O=e.mode,T=e.required,E=e.isClearable,w=e.mapper,M=e.fetchFn,A=e.election,R=f(N),k=(0,i.useState)([]),B=(0,l.Z)(k,2),D=B[0],U=B[1],q=(0,i.useState)(!1),V=(0,l.Z)(q,2),P=V[0],L=V[1];(0,i.useEffect)((function(){v({name:N})}),[v,N]),(0,i.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.prev=1,e.next=4,M();case 4:n=(n=e.sent).map((function(e){return w.toAutocomplete(e)})),U(n),L(!1),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),U([]),L(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e().then((function(){}))}),[]);var F=function(e){return(D||[]).find((function(n){return n.value===e.value}))||e},G=function(){return"multiple"===O?_():H()},_=function(){return R?R.map((function(e){return F(w.toAutocomplete(e))})):[]},H=function(){return R?F(w.toAutocomplete(R)):null},Y=function(n){if(!n)return g(N,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var t=n.map((function(e){return w.toValue(e)}));g(N,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},Q=function(n){if(!n)return g(N,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var t=w.toValue(n);g(N,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},$=P?(0,d.ag)("autocomplete.loading"):y,X=u.Z.errorMessage(N,t,x,Z,S),W=Boolean(X)?{control:function(e){return(0,a.Z)((0,a.Z)({},e),{},{borderColor:"red"})}}:void 0;return(0,p.jsxs)("div",{className:"form-group",children:[Boolean(j)&&(0,p.jsx)("label",{className:"col-form-label ".concat(T?"required":null),htmlFor:N,children:j}),(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(c.ZP,{className:"w-100",styles:W,id:N,name:N,isMulti:"multiple"===O,placeholder:C||"",autoFocus:I||void 0,onChange:function(e){return"multiple"===O?Y(e):Q(e)},value:G(),isClearable:E,options:function(){var n=e.mode;return D?G()?"multiple"===n?h()([].concat((0,r.Z)(D),(0,r.Z)(G())),"value"):h()([].concat((0,r.Z)(D),[G()]),"value"):D:[]}(),onBlur:function(n){e.onBlur&&e.onBlur(n)},loadingMessage:function(){return(0,d.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,d.ag)("autocomplete.noOptions")}}),A&&e.showCreate&&e.hasPermissionToCreate?(0,p.jsx)("button",{style:{marginLeft:"16px",flexShrink:0},className:"btn btn-primary",type:"button",onClick:e.onOpenModal,children:(0,p.jsx)("i",{className:"fas fa-plus"})}):null]}),(0,p.jsx)("div",{className:"invalid-feedback",children:X}),Boolean($)&&(0,p.jsx)("small",{className:"form-text text-muted",children:$})]})}g.defaultProps={isClearable:!0,mode:"default",required:!1},n.Z=g},21538:function(e,n,t){t(47313);var a=t(43270),r=t(49384),s=t(46417);function o(e){var n=e.label,t=e.name,o=e.hint,l=e.type,i=e.placeholder,u=e.autoFocus,c=e.autoComplete,d=e.required,m=e.externalErrorMessage,f=e.disabled,h=(0,a.Gc)(),p=h.register,g=h.errors,v=h.formState,b=v.touched,x=v.isSubmitted,Z=r.Z.errorMessage(t,g,b,x,m);return(0,s.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,s.jsx)("label",{className:"col-form-label ".concat(d?"required":null),htmlFor:t,children:n}),(0,s.jsx)("input",{id:t,name:t,type:l,ref:p,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:i||void 0,autoFocus:u||void 0,autoComplete:c||void 0,disabled:f,className:"form-control ".concat(Z?"is-invalid":"")}),(0,s.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(o)&&(0,s.jsx)("small",{className:"form-text text-muted",children:o})]})}o.defaultProps={type:"number",required:!1},n.Z=o},5544:function(e,n,t){var a=t(1413),r=t(47313),s=t(73622),o=t(10499),l=t(43270),i=t(49384),u=t(46417);function c(e){var n=e.label,t=e.name,c=e.hint,d=e.options,m=e.required,f=e.mode,h=e.placeholder,p=e.isClearable,g=e.externalErrorMessage,v=(0,l.Gc)(),b=v.register,x=v.errors,Z=v.formState,j=Z.touched,N=Z.isSubmitted,y=v.setValue,C=v.watch,I=i.Z.errorMessage(t,x,j,N,g),S=C(t);(0,r.useEffect)((function(){b({name:t})}),[b,t]);var O=function(){return S?S.map((function(e){return d.find((function(n){return n.value===e}))})):[]},T=function(){var n=e.options;return null!=S?n.find((function(e){return e.value===S})):null},E=function(n){if(!n)return y(t,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var a=n.map((function(e){return e?e.value:e})).filter((function(e){return null!=e}));y(t,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},w=function(n){if(!n)return y(t,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));y(t,n.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.value)},M=Boolean(I)?{container:function(e){return(0,a.Z)((0,a.Z)({},e),{},{color:"hsl(0,0%,20%)"})},control:function(e){return(0,a.Z)((0,a.Z)({},e),{},{borderColor:"red"})}}:{container:function(e){return(0,a.Z)((0,a.Z)({},e),{},{color:"hsl(0,0%,20%)"})}};return(0,u.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,u.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:n}),(0,u.jsx)("br",{}),(0,u.jsx)(s.ZP,{className:"w-100",value:"multiple"===e.mode?O():T(),onChange:function(n){return"multiple"===e.mode?E(n):w(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},id:t,name:t,options:d,isMulti:"multiple"===f,placeholder:h||"",isClearable:p,styles:M,loadingMessage:function(){return(0,o.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,o.ag)("autocomplete.noOptions")}}),(0,u.jsx)("div",{className:"invalid-feedback",children:I}),Boolean(c)&&(0,u.jsx)("small",{className:"form-text text-muted",children:c})]})}c.defaultProps={required:!1,isClearable:!0},n.Z=c},99433:function(e,n,t){t.d(n,{Z:function(){return J}});var a=t(1413),r=t(36459),s=t(70885),o=t(43270),l=t(10499),i=t(47313),u=t(47575),c=t(5544),d=t(49384),m=t(61378),f=t.n(m),h=(t(72632),t(46417));function p(e){var n=e.label,t=e.name,a=e.hint,r=e.placeholder,s=e.autoFocus,l=e.externalErrorMessage,u=e.required,c=e.showTimeInput,m=e.scrollableYearDropdown,p=e.showYearDropdown,g=e.showMonthDropdown,v=(0,o.Gc)(),b=v.register,x=v.errors,Z=v.formState,j=Z.touched,N=Z.isSubmitted,y=v.setValue,C=v.watch;(0,i.useEffect)((function(){b({name:t})}),[b,t]);var I=d.Z.errorMessage(t,x,j,N,l);return(0,h.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,h.jsx)("label",{className:"col-form-label ".concat(u?"required":null),htmlFor:t,children:n}),(0,h.jsx)("br",{}),(0,h.jsx)(f(),{id:t,name:t,className:"form-control ".concat(I?"is-invalid":""),onChange:function(n){y(t,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},selected:C(t),showTimeInput:c,scrollableYearDropdown:m,showYearDropdown:p,showMonthDropdown:g,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1}},placeholderText:r||"",autoFocus:s||void 0,autoComplete:"off",dateFormat:c?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15}),(0,h.jsx)("div",{className:"invalid-feedback",children:I}),Boolean(a)&&(0,h.jsx)("small",{className:"form-text text-muted",children:a})]})}p.defaultProps={required:!1};var g=p,v=t(68160),b=t(95748),x=t(6473),Z=t(89994),j=t(67357),N=t(15671),y=t(43144),C=function(){function e(){(0,N.Z)(this,e)}return(0,y.Z)(e,null,[{key:"values",get:function(){return{AGRO_ALIMENTAIRE:"AGRO-ALIMENTAIRE",ASSURANCES:"ASSURANCES",AUDIOVISUEL:"AUDIOVISUEL",BANCAIRE:"BANCAIRE",CHIMIE:"CHIMIE",COMPOSANTS_AUTOMOBILES:"COMPOSANTS AUTOMOBILES",DISTRIBUTION:"DISTRIBUTION",DISTRIBUTION_AUTOMOBILE:"DISTRIBUTION AUTOMOBILE",DIVERS:"DIVERS",FINANCIER:"FINANCIER",HOLDING:"HOLDING",IMMOBILIER:"IMMOBILIER",INDUSTRIEL:"INDUSTRIEL",LEASING:"LEASING",LOGISTIQUE_TRANSPORT:"LOGISTIQUE ET TRANSPORT",PHARMACEUTIQUE:"PHARMACEUTIQUE","SANT\xc9":"SANT\xc9",TOURSIME:"TOURSIME",INFORMATION_TECHNOLOGY:"INFORMATION TECHNOLOGY"}}},{key:"labelOf",value:function(e){return this.values[e]?(0,l.ag)("secteur.".concat(e,".label")):e}},{key:"descriptionOf",value:function(e){return this.values[e]?(0,l.ag)("secteur.".concat(e,".description")):e}}]),e}(),I={secteur:Object.keys(C.values)},S=t(70816),O=t.n(S),T=function(){function e(){(0,N.Z)(this,e)}return(0,y.Z)(e,null,[{key:"values",get:function(){return{"c\xe9l\xe9bataire":"c\xe9l\xe9bataire","mari\xe9":"mari\xe9"}}},{key:"labelOf",value:function(e){return this.values[e]?(0,l.ag)("".concat(e)):e}},{key:"descriptionOf",value:function(e){return this.values[e]?(0,l.ag)("etat.".concat(e,".description")):e}}]),e}(),E={Etat:Object.keys(T.values)},w=t(63849),M=t(31616),A=t(85543),R=t(96111),k=t(42982),B=t(81437),D=t(74165),U=t(15861),q=t(1168),V=t(33512),P=t(46952);var L=function(e){var n=(0,i.useRef)(),t=(0,i.useState)(!1),a=(0,s.Z)(t,2),r=a[0],o=a[1];(0,i.useEffect)((function(){window.$(n.current).modal("show"),window.$(n.current).on("hidden.bs.modal",e.onClose)}),[]);var u=function(){var t=(0,U.Z)((0,D.Z)().mark((function t(a,r){var s,l,i;return(0,D.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o(!0),t.next=4,B.Z.create(r);case 4:return s=t.sent,l=s.id,t.next=8,B.Z.find(l);case 8:i=t.sent,window.$(n.current).modal("hide"),e.onSuccess(i),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),V.Z.handle(t.t0);case 16:return t.prev=16,o(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})));return function(e,n){return t.apply(this,arguments)}}();return q.createPortal((0,h.jsx)("div",{ref:n,className:"modal",tabIndex:-1,children:(0,h.jsx)("div",{className:"modal-dialog modal-lg",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h5",{className:"modal-title",children:(0,l.ag)("entities.coupons.new.title")}),(0,h.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,h.jsx)("span",{children:"\xd7"})})]}),(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsx)(P.Z,{saveLoading:r,onSubmit:u,onCancel:function(){window.$(n.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},F=t(49513),G=t(45788),_=t(93184);var H=function(e){var n=(0,o.Gc)(),t=n.setValue,r=n.getValues,l=(0,i.useState)(!1),u=(0,s.Z)(l,2),c=u[0],d=u[1],m=(0,G.v9)(_.Z.selectPermissionToCreate),f=function(){d(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(F.Z,(0,a.Z)((0,a.Z)({},e),{},{fetchFn:function(e,n){return B.Z.listAutocomplete(e,n)},mapper:{toAutocomplete:function(e){if(!e)return null;var n=e.id,t=e.label;return e.id&&(t=e.label),{key:n,value:n,label:t}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){d(!0)},hasPermissionToCreate:m})),c&&(0,h.jsx)(L,{onClose:f,onSuccess:function(n){var a=e.name,s=e.mode;t(a,s&&"multiple"===s?[].concat((0,k.Z)(r()[a]||[]),[n]):n,{shouldValidate:!0,shouldDirty:!0}),f()}})]})},Y=t(6891);var Q=function(e){var n=(0,i.useState)(!1),t=(0,s.Z)(n,2),a=t[0],r=t[1],o=(0,i.useRef)(),u=function(){var n=e.value;return n?Array.isArray(n)?n:[n]:[]},c=function(){var n=(0,U.Z)((0,D.Z)().mark((function n(t){var a,s;return(0,D.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,(a=t.target.files)&&a.length){n.next=4;break}return n.abrupt("return");case 4:return s=a[0],Y.Z.validate(s,{storage:e.storage,formats:e.formats}),r(!0),n.next=9,Y.Z.upload(s,{storage:e.storage,formats:e.formats});case 9:s=n.sent,o.current.value="",r(!1),e.onChange([].concat((0,k.Z)(u()),[s])),n.next=21;break;case 15:n.prev=15,n.t0=n.catch(0),o.current.value="",console.error(n.t0),r(!1),V.Z.showMessage(n.t0);case 21:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}(),d=e.max,m=e.readonly,f=(0,h.jsxs)("label",{className:"btn btn-outline-secondary px-4 mb-2",style:{cursor:"pointer"},children:[(0,h.jsx)(b.Z,{loading:a,iconClass:"fas fa-plus"}),(0,l.ag)("fileUploader.upload"),(0,h.jsx)("input",{style:{display:"none"},disabled:a||m,accept:function(){var n=e.schema;if(n&&n.formats)return n.formats.map((function(e){return".".concat(e)})).join(",")}(),type:"file",onChange:c,ref:o})]});return(0,h.jsxs)("div",{children:[m||d&&u().map((function(e){return{uid:e.id||void 0,name:e.name,status:"done",url:e.downloadUrl}})).length>=d?null:f,u()&&u().length?(0,h.jsx)("div",{children:u().map((function(n){return(0,h.jsxs)("div",{children:[(0,h.jsx)("i",{className:"fas fa-link text-muted mr-2"}),(0,h.jsx)("a",{href:n.downloadUrl,target:"_blank",rel:"noopener noreferrer",download:!0,children:n.name}),!m&&(0,h.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return t=n.id,void e.onChange(u().filter((function(e){return e.id!==t})));var t},children:(0,h.jsx)("i",{className:"fas fa-times"})})]},n.id)}))}):null]})};function $(e){var n=e.label,t=e.name,a=e.hint,r=e.storage,s=e.formats,l=e.max,u=e.required,c=e.externalErrorMessage,m=(0,o.Gc)(),f=m.register,p=m.errors,g=m.formState,v=g.touched,b=g.isSubmitted,x=m.setValue,Z=m.watch;(0,i.useEffect)((function(){f({name:t})}),[f,t]);var j=d.Z.errorMessage(t,p,v,b,c);return(0,h.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,h.jsx)("label",{className:"col-form-label ".concat(u?"required":null),htmlFor:t,children:n}),(0,h.jsx)("br",{}),(0,h.jsx)(Q,{storage:r,formats:s,value:Z(t),onChange:function(n){x(t,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},max:l}),(0,h.jsx)("div",{className:"invalid-feedback",children:j}),Boolean(a)&&(0,h.jsx)("small",{className:"form-text text-muted",children:a})]})}$.defaultProps={max:void 0,required:!1};var X=$,W=x.Ry().shape({email:Z.Z.email((0,l.ag)("user.fields.email")),roles:Z.Z.stringArray((0,l.ag)("user.fields.roles"),{}),phoneNumber:Z.Z.string((0,l.ag)("phoneNumber"),{max:24}),secteur:Z.Z.enumerator((0,l.ag)("secteur"),{options:I.secteur}),adresse:Z.Z.string((0,l.ag)("adresse"),{}),fullName:Z.Z.string((0,l.ag)("fullName"),{}),cin:Z.Z.integer((0,l.ag)("cin"),{max:8}),bearthday:Z.Z.date((0,l.ag)("Date Naissance"),{})}),z=x.Ry().shape({emails:x.IX().label((0,l.ag)("user.fields.emails")).of(x.Z_().transform((function(e,n){return""===n?null:e})).email((0,l.ag)("user.validations.email")).label((0,l.ag)("user.fields.email")).max(255).required()).required().min(1),roles:Z.Z.stringArray((0,l.ag)("user.fields.roles"),{required:!1})});var J=function(e){e.single;var n=e.saveLoading,t=e.user||{},d=e.single?W:z,m=(0,i.useState)((function(){return{emails:[],email:"",roles:[],phoneNumber:"",passportNumber:"",nationality:"",country:"",state:"",payee:"",fullName:"",bearthday:t.date_naissance?O()(t.date_naissance,"DD-MM-YYYY").toDate():null,visa:"",visaDocument:[""]}})),f=(0,s.Z)(m,1)[0],p=(0,o.cI)({resolver:(0,j.X)(d),mode:"all",defaultValues:f}),x=function(n){var t=Object.assign({},((0,r.Z)(n),n));t.roles[0]="membre",t.email&&(t.emails=[t.email],delete t.email),e.onSubmit(null,t)},Z=(0,i.useState)(new Date),N=(0,s.Z)(Z,2);return N[0],N[1],(0,h.jsx)(v.Z,{children:(0,h.jsx)(o.RV,(0,a.Z)((0,a.Z)({},p),{},{children:(0,h.jsxs)("form",{onSubmit:p.handleSubmit(x),children:[(0,h.jsxs)(w.Z,{style:{paddingBottom:"10px"},children:[(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(u.Z,{name:"emails[0]",label:(0,l.ag)("user.fields.email"),required:!0})}),(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(u.Z,{name:"fullName",label:(0,l.ag)("user.fields.fullName"),required:!0})}),(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(u.Z,{name:"phoneNumber",label:(0,l.ag)("user.fields.phoneNumber"),autoComplete:"phoneNumber"})})]}),(0,h.jsxs)(w.Z,{children:[(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(u.Z,{name:"nationality",label:(0,l.ag)("user.fields.Nationality")})}),(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(u.Z,{name:"country",label:(0,l.ag)("user.fields.Country"),autoComplete:"Country"})}),(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(u.Z,{name:"state",label:(0,l.ag)("user.fields.state"),autoComplete:"state"})})]}),(0,h.jsxs)(w.Z,{style:{paddingBottom:"10px"},children:[(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(u.Z,{name:"passportNumber",label:(0,l.ag)("user.fields.passportNumber")})}),(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(A.Z,{name:"photo",label:(0,l.ag)("entities.category.fields.passportphoto"),required:!1,storage:R.Z.values.categoryPhoto,max:void 0})}),(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(g,{name:"bearthday",label:(0,l.ag)("user.fields.bearthday")})})]}),(0,h.jsxs)(w.Z,{children:[(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(c.Z,{name:"payee",label:(0,l.ag)("user.fields.payee"),options:E.Etat.map((function(e){return{value:e,label:(0,l.ag)("user.maritalStatus.".concat(e))}}))})}),(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(X,{name:"attachements",label:(0,l.ag)("entities.projet.fields.attachements"),required:!1,storage:R.Z.values.projetAttachements,max:void 0,formats:void 0})}),(0,h.jsx)(M.Z,{sm:4,children:(0,h.jsx)(H,{name:"coupons",label:(0,l.ag)("entities.subcategories.fields.categoryId"),required:!0,showCreate:!e.modal})})]}),(0,h.jsxs)("div",{className:"form-buttons",children:[(0,h.jsxs)("button",{className:"btn btn-primary",disabled:n,type:"button",onClick:p.handleSubmit(x),children:[(0,h.jsx)(b.Z,{loading:n,iconClass:"far fa-save"}),(0,l.ag)("common.save")]}),(0,h.jsxs)("button",{disabled:n,onClick:function(){Object.keys(f).forEach((function(e){p.setValue(e,f[e])}))},className:"btn btn-light",type:"button",children:[(0,h.jsx)("i",{className:"fas fa-undo"}),(0,l.ag)("common.reset")]}),e.onCancel?(0,h.jsxs)("button",{disabled:n,onClick:function(){return e.onCancel()},className:"btn btn-light",type:"button",children:[(0,h.jsx)("i",{className:"fas fa-times"}),(0,l.ag)("common.cancel")]}):null]})]})}))})}}}]);