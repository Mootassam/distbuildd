"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[497],{20461:function(e,t,n){var o={selectLoading:(0,n(76747).P1)([function(e){return e.product.destroy}],(function(e){return Boolean(e.loading)}))};t.Z=o},4694:function(e,t,n){var o=n(76747),s=n(86495),a=n(26319),l=n(71945),i=(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsRead)})),r=(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsEdit)})),c=(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsCreate)})),d=(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsImport)})),u={selectPermissionToRead:i,selectPermissionToEdit:r,selectPermissionToCreate:c,selectPermissionToDestroy:(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsDestroy)})),selectPermissionToImport:d};t.Z=u},80197:function(e,t,n){var o=n(76747),s=n(86495),a=n(26319),l=n(71945),i=(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsRead)})),r=(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsEdit)})),c=(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsCreate)})),d=(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsImport)})),u={selectPermissionToRead:i,selectPermissionToEdit:r,selectPermissionToCreate:c,selectPermissionToDestroy:(0,o.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(l.Z.values.couponsDestroy)})),selectPermissionToImport:d};t.Z=u},70497:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var o=n(47313),s=n(10499),a=n(1413),l=n(70885),i=n(48211),r=n(18026),c=n(45788),d=n(43270),u=n(47590),m=n(95748),h=n(69138),f=n(6473),p=n(67357),x=n(13586),v=n(40846),Z=n(47575),b=n(99720),g=n(46417),j=f.Ry().shape({title:u.Z.string((0,s.ag)("entities.product.fields.title")),amount:u.Z.decimal((0,s.ag)("entities.product.fields.amount")),vip:u.Z.relationToOne((0,s.ag)("entities.product.fields.vip"))}),C={title:null,amount:null,vip:null},y={title:{label:(0,s.ag)("entities.product.fields.title"),render:v.Z.generic()},amount:{label:(0,s.ag)("entities.product.fields.amount"),render:v.Z.decimal()},vip:{label:(0,s.ag)("entities.product.fields.vip"),render:v.Z.relationToOne()}};var N=function(e){var t=(0,c.v9)(r.Z.selectRawFilter),n=(0,c.I0)(),u=(0,o.useState)(!1),f=(0,l.Z)(u,2),v=f[0],N=f[1],w=(0,o.useState)((function(){return(0,a.Z)((0,a.Z)({},C),t)})),k=(0,l.Z)(w,1)[0],T=(0,d.cI)({resolver:(0,p.X)(j),defaultValues:k,mode:"all"});(0,o.useEffect)((function(){n(i.Z.doFetch(j.cast(k),t))}),[n]);var S=function(e){var t=T.getValues();n(i.Z.doFetch(e,t)),N(!1)};return(0,g.jsxs)(h.Z,{children:[(0,g.jsx)(x.Z,{onClick:function(){N(!v)},renders:y,values:t,expanded:v,onRemove:function(e){return T.setValue(e,C[e]),T.handleSubmit(S)()}}),(0,g.jsx)("div",{className:"container",children:(0,g.jsx)("div",{className:"collapse ".concat(v?"show":""),children:(0,g.jsx)(d.RV,(0,a.Z)((0,a.Z)({},T),{},{children:(0,g.jsxs)("form",{onSubmit:T.handleSubmit(S),children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-lg-6 col-12",children:(0,g.jsx)(Z.Z,{name:"title",label:(0,s.ag)("entities.product.fields.title")})}),(0,g.jsx)("div",{className:"col-lg-6 col-12",children:(0,g.jsx)(Z.Z,{name:"amount",label:(0,s.ag)("entities.product.fields.amount")})}),(0,g.jsx)("div",{className:"col-lg-6 col-12",children:(0,g.jsx)(b.Z,{name:"vip",label:(0,s.ag)("entities.product.fields.vip")})})]}),(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,g.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,g.jsx)(m.Z,{loading:e.loading,iconClass:"fas fa-search"}),(0,s.ag)("common.search")]}),(0,g.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(C).forEach((function(e){T.setValue(e,C[e])})),n(i.Z.doReset()),N(!1)},disabled:e.loading,children:[(0,g.jsx)(m.Z,{loading:e.loading,iconClass:"fas fa-undo"}),(0,s.ag)("common.reset")]})]})})]})}))})})]})},w=n(28303),k=n(4694),T=n(41419),S=n(20461),P=n(98848),R=n(44587),E=n(61567),V=n(27216),F=n(97249),L=(n(35533),n(80197));var U=function(e){var t=(0,c.v9)(L.Z.selectPermissionToRead),n=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]};return n().length?(0,g.jsx)(g.Fragment,{children:n().map((function(e){return n=e,t?(0,g.jsx)("div",{children:(0,g.jsx)(w.rU,{className:"btn btn-link",to:"/vip/".concat(n.id),children:(0,g.jsxs)("span",{className:"vip",children:["  ",n.title," "]})})},n.id):(0,g.jsx)("div",{children:n.title},n.id);var n}))}):null};var q=function(e){var t=(0,o.useState)(null),n=(0,l.Z)(t,2),a=n[0],d=n[1],u=(0,c.I0)(),m=(0,c.v9)(r.Z.selectLoading),h=(0,c.v9)(S.Z.selectLoading),f=m||h,p=(0,c.v9)(r.Z.selectRows),x=(0,c.v9)(r.Z.selectPagination),v=(0,c.v9)(r.Z.selectSelectedKeys),Z=(0,c.v9)(r.Z.selectHasRows),b=(0,c.v9)(r.Z.selectSorter),j=(0,c.v9)(r.Z.selectIsAllSelected),C=(0,c.v9)(k.Z.selectPermissionToEdit),y=(0,c.v9)(k.Z.selectPermissionToDestroy),N=function(){d(null)},L=function(e){var t=b.field===e&&"ascend"===b.order?"descend":"ascend";u(i.Z.doChangeSort({field:e,order:t}))};return(0,g.jsxs)(V.Z,{children:[(0,g.jsx)("div",{className:"table-responsive",children:(0,g.jsxs)("table",{className:"table table-striped     mt-2",children:[(0,g.jsx)("thead",{className:"thead",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)(P.Z,{className:"th-checkbox",children:Z&&(0,g.jsxs)("div",{className:"adherent-control adherent-checkbox",children:[(0,g.jsx)("input",{type:"checkbox",className:"adherent-control-input",id:"table-header-checkbox",checked:Boolean(j),onChange:function(){u(i.Z.doToggleAllSelected())}}),(0,g.jsx)("label",{htmlFor:"table-header-checkbox",className:"adherent-control-label",children:"\xa0"})]})}),(0,g.jsx)(P.Z,{onSort:L,hasRows:Z,sorter:b,name:"vip",label:(0,s.ag)("entities.product.fields.vip")}),(0,g.jsx)(P.Z,{onSort:L,hasRows:Z,sorter:b,name:"title",label:(0,s.ag)("entities.product.fields.title")}),(0,g.jsx)(P.Z,{onSort:L,hasRows:Z,sorter:b,name:"noOfTimes",label:(0,s.ag)("entities.product.fields.amount"),align:"right"}),(0,g.jsx)(P.Z,{onSort:L,hasRows:Z,sorter:b,name:"discount",label:(0,s.ag)("entities.product.fields.commission"),align:"right"}),(0,g.jsx)(P.Z,{className:"th-actions"})]})}),(0,g.jsxs)("tbody",{children:[f&&(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:100,children:(0,g.jsx)(E.Z,{})})}),!f&&!Z&&(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:100,children:(0,g.jsx)("div",{className:"d-flex justify-content-center",children:(0,s.ag)("table.noData")})})}),!f&&p.map((function(e){return(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"th-checkbox",scope:"row",children:(0,g.jsxs)("div",{className:"adherent-control adherent-checkbox",children:[(0,g.jsx)("input",{type:"checkbox",className:"adherent-control-input",id:"table-header-checkbox-".concat(e.id),checked:v.includes(e.id),onChange:function(){return t=e.id,void u(i.Z.doToggleOneSelected(t));var t}}),(0,g.jsx)("label",{htmlFor:"table-header-checkbox-".concat(e.id),className:"adherent-control-label",children:"\xa0"})]})}),(0,g.jsx)("td",{children:(0,g.jsx)(U,{value:e.vip})}),(0,g.jsx)("td",{children:e.title}),(0,g.jsx)("td",{style:{textAlign:"right"},children:e.amount}),(0,g.jsx)("td",{style:{textAlign:"right"},children:e.commission}),(0,g.jsxs)("td",{className:"td-actions",children:[(0,g.jsx)(w.rU,{className:"btn btn-link",to:"/product/".concat(e.id),children:(0,s.ag)("common.view")}),C&&(0,g.jsx)(w.rU,{className:"btn btn-link",to:"/product/".concat(e.id,"/edit"),children:(0,s.ag)("common.edit")}),y&&(0,g.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return t=e.id,void d(t);var t},children:(0,s.ag)("common.destroy")})]})]},e.id)}))]})]})}),(0,g.jsx)(F.Z,{onChange:function(e){u(i.Z.doChangePagination(e))},disabled:f,pagination:x}),a&&(0,g.jsx)(R.Z,{title:(0,s.ag)("common.areYouSure"),onConfirm:function(){return e=a,N(),void u(T.Z.doDestroy(e));var e},onClose:function(){return N()},okText:(0,s.ag)("common.yes"),cancelText:(0,s.ag)("common.no")})]})},B=n(23516),D=n(10419),I=n(28745);var A=function(e){var t=(0,o.useState)(!1),n=(0,l.Z)(t,2),a=n[0],d=n[1],u=(0,c.I0)(),h=(0,c.v9)(r.Z.selectSelectedKeys),f=(0,c.v9)(r.Z.selectLoading),p=(0,c.v9)(S.Z.selectLoading),x=(0,c.v9)(r.Z.selectExportLoading),v=(0,c.v9)(r.Z.selectHasRows),Z=(0,c.v9)(B.Z.selectPermissionToRead),b=(0,c.v9)(k.Z.selectPermissionToDestroy),j=(0,c.v9)(k.Z.selectPermissionToCreate),C=(0,c.v9)(k.Z.selectPermissionToImport),y=function(){d(!0)},N=function(){d(!1)},P=function(){u(i.Z.doExport())};return(0,g.jsxs)(D.Z,{children:[j&&(0,g.jsx)(w.rU,{to:"/product/new",children:(0,g.jsxs)("span",{"data-tip":(0,s.ag)("common.new"),"data-for":"charge-list-toolbar-new-tooltip",children:[(0,g.jsx)("button",{className:"btn btn-primary",type:"button",children:(0,g.jsx)(m.Z,{iconClass:"fas fa-plus"})}),(0,g.jsx)(I.Z,{id:"charge-list-toolbar-new-tooltip"})]})}),C&&(0,g.jsx)(w.rU,{to:"/product/importer",children:(0,g.jsxs)("span",{"data-tip":(0,s.ag)("common.import"),"data-for":"charge-list-toolbar-import-tooltip",children:[(0,g.jsx)("button",{className:"btn btn-primary",type:"button",children:(0,g.jsx)(m.Z,{iconClass:"fas fa-upload"})}),(0,g.jsx)(I.Z,{id:"charge-list-toolbar-import-tooltip"})]})}),function(){if(!b)return null;var e=!h.length||f,t=(0,g.jsx)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:y,children:(0,g.jsx)(m.Z,{loading:p,iconClass:"far fa-trash-alt"})});return e?(0,g.jsxs)("span",{"data-tip":(0,s.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-destroy-tooltip",children:[t,(0,g.jsx)(I.Z,{id:"coupons-list-toolbar-destroy-tooltip"})]}):t}(),Z&&(0,g.jsx)(w.rU,{to:"/audit-logs?entityNames=coupons",children:(0,g.jsxs)("span",{"data-tip":(0,s.ag)("auditLog.menu"),"data-for":"charge-list-toolbar-auditLog-tooltip",children:[(0,g.jsx)("button",{className:"btnCircle btn-light",type:"button",children:(0,g.jsx)(m.Z,{iconClass:"fas fa-history"})}),(0,g.jsx)(I.Z,{id:"charge-list-toolbar-auditLog-tooltip"})]})}),function(){var e=!v||f,t=(0,g.jsxs)("span",{"data-tip":(0,s.ag)("common.export"),"data-for":"charge-list-toolbar-export",children:[(0,g.jsx)("button",{className:"btnCircle btn-light",disabled:e,onClick:P,type:"button",children:(0,g.jsx)(m.Z,{loading:x,iconClass:"far fa-file-excel"})}),(0,g.jsx)(I.Z,{id:"charge-list-toolbar-export"})]});return e?(0,g.jsxs)("span",{"data-tip":(0,s.ag)("common.noDataToExport"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-export-tooltip",children:[t,(0,g.jsx)(I.Z,{id:"coupons-list-toolbar-export-tooltip"})]}):t}(),a&&(0,g.jsx)(R.Z,{title:(0,s.ag)("common.areYouSure"),onConfirm:function(){return N(),void u(T.Z.doDestroyAll(h))},onClose:function(){return N()},okText:(0,s.ag)("common.yes"),cancelText:(0,s.ag)("common.no")})]})},O=n(27829),M=n(53852),$=n(75352),G=n(22102),H=n(63849),K=n(31616);var X=function(e){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(M.Z,{items:[[(0,s.ag)("dashboard.menu"),"/"],[(0,s.ag)("entities.product.menu")]]}),(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(G.Z,{fluid:!0,children:(0,g.jsxs)(H.Z,{children:[(0,g.jsx)(K.Z,{xs:9,children:(0,g.jsx)($.Z,{children:(0,s.ag)("entities.product.list.title")})}),(0,g.jsx)(K.Z,{md:"auto",children:(0,g.jsx)(A,{})})]})}),(0,g.jsx)(N,{}),(0,g.jsx)(q,{})]})]})}},49513:function(e,t,n){var o=n(1413),s=n(42982),a=n(74165),l=n(15861),i=n(70885),r=n(47313),c=n(49384),d=n(73622),u=n(10499),m=n(43270),h=n(35487),f=n.n(h),p=n(46417);function x(e){var t=(0,m.Gc)(),n=t.errors,h=t.watch,x=t.setValue,v=t.register,Z=t.formState,b=Z.touched,g=Z.isSubmitted,j=e.label,C=e.name,y=e.hint,N=e.placeholder,w=e.autoFocus,k=e.externalErrorMessage,T=e.mode,S=e.required,P=e.isClearable,R=e.mapper,E=e.fetchFn,V=e.election,F=h(C),L=(0,r.useState)([]),U=(0,i.Z)(L,2),q=U[0],B=U[1],D=(0,r.useState)(!1),I=(0,i.Z)(D,2),A=I[0],O=I[1];(0,r.useEffect)((function(){v({name:C})}),[v,C]),(0,r.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,E();case 4:t=(t=e.sent).map((function(e){return R.toAutocomplete(e)})),B(t),O(!1),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),B([]),O(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e().then((function(){}))}),[]);var M=function(e){return(q||[]).find((function(t){return t.value===e.value}))||e},$=function(){return"multiple"===T?G():H()},G=function(){return F?F.map((function(e){return M(R.toAutocomplete(e))})):[]},H=function(){return F?M(R.toAutocomplete(F)):null},K=function(t){if(!t)return x(C,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var n=t.map((function(e){return R.toValue(e)}));x(C,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},X=function(t){if(!t)return x(C,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var n=R.toValue(t);x(C,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},Y=A?(0,u.ag)("autocomplete.loading"):y,_=c.Z.errorMessage(C,n,b,g,k),z=Boolean(_)?{control:function(e){return(0,o.Z)((0,o.Z)({},e),{},{borderColor:"red"})}}:void 0;return(0,p.jsxs)("div",{className:"form-group",children:[Boolean(j)&&(0,p.jsx)("label",{className:"col-form-label ".concat(S?"required":null),htmlFor:C,children:j}),(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(d.ZP,{className:"w-100",styles:z,id:C,name:C,isMulti:"multiple"===T,placeholder:N||"",autoFocus:w||void 0,onChange:function(e){return"multiple"===T?K(e):X(e)},value:$(),isClearable:P,options:function(){var t=e.mode;return q?$()?"multiple"===t?f()([].concat((0,s.Z)(q),(0,s.Z)($())),"value"):f()([].concat((0,s.Z)(q),[$()]),"value"):q:[]}(),onBlur:function(t){e.onBlur&&e.onBlur(t)},loadingMessage:function(){return(0,u.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,u.ag)("autocomplete.noOptions")}}),V&&e.showCreate&&e.hasPermissionToCreate?(0,p.jsx)("button",{style:{marginLeft:"16px",flexShrink:0},className:"btn btn-primary",type:"button",onClick:e.onOpenModal,children:(0,p.jsx)("i",{className:"fas fa-plus"})}):null]}),(0,p.jsx)("div",{className:"invalid-feedback",children:_}),Boolean(Y)&&(0,p.jsx)("small",{className:"form-text text-muted",children:Y})]})}x.defaultProps={isClearable:!0,mode:"default",required:!1},t.Z=x},21538:function(e,t,n){n(47313);var o=n(43270),s=n(49384),a=n(46417);function l(e){var t=e.label,n=e.name,l=e.hint,i=e.type,r=e.placeholder,c=e.autoFocus,d=e.autoComplete,u=e.required,m=e.externalErrorMessage,h=e.disabled,f=(0,o.Gc)(),p=f.register,x=f.errors,v=f.formState,Z=v.touched,b=v.isSubmitted,g=s.Z.errorMessage(n,x,Z,b,m);return(0,a.jsxs)("div",{className:"form-group",children:[Boolean(t)&&(0,a.jsx)("label",{className:"col-form-label ".concat(u?"required":null),htmlFor:n,children:t}),(0,a.jsx)("input",{id:n,name:n,type:i,ref:p,onChange:function(t){e.onChange&&e.onChange(t.target.value)},onBlur:function(t){e.onBlur&&e.onBlur(t)},placeholder:r||void 0,autoFocus:c||void 0,autoComplete:d||void 0,disabled:h,className:"form-control ".concat(g?"is-invalid":"")}),(0,a.jsx)("div",{className:"invalid-feedback",children:g}),Boolean(l)&&(0,a.jsx)("small",{className:"form-text text-muted",children:l})]})}l.defaultProps={type:"number",required:!1},t.Z=l},44587:function(e,t,n){var o=n(47313),s=n(1168),a=n(46417);t.Z=function(e){var t=(0,o.useRef)();(0,o.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);return s.createPortal((0,a.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,a.jsx)("div",{className:"modal-dialog modal-sm",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h5",{className:"modal-title",children:e.title}),(0,a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,a.jsx)("span",{children:"\xd7"})})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-light btn-sm","data-dismiss":"modal",children:e.cancelText}),(0,a.jsx)("button",{type:"button",onClick:function(){return window.$(t.current).modal("hide"),e.onConfirm()},className:"btn btn-primary btn-sm",children:e.okText})]})]})})}),document.getElementById("modal-root"))}},99720:function(e,t,n){n.d(t,{Z:function(){return g}});var o=n(1413),s=n(42982),a=n(70885),l=n(47313),i=n(96988),r=n(74165),c=n(15861),d=n(1168),u=n(10499),m=n(33512),h=n(5090),f=n(46417);var p=function(e){var t=(0,l.useRef)(),n=(0,l.useState)(!1),o=(0,a.Z)(n,2),s=o[0],p=o[1];(0,l.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var x=function(){var n=(0,c.Z)((0,r.Z)().mark((function n(o,s){var a,l,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,p(!0),n.next=4,i.Z.create(s);case 4:return a=n.sent,l=a.id,n.next=8,i.Z.find(l);case 8:c=n.sent,window.$(t.current).modal("hide"),e.onSuccess(c),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),m.Z.handle(n.t0);case 16:return n.prev=16,p(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return d.createPortal((0,f.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,f.jsx)("div",{className:"modal-dialog modal-lg",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h5",{className:"modal-title",children:(0,u.ag)("entities.vip.new.title")}),(0,f.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,f.jsx)("span",{children:"\xd7"})})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)(h.Z,{saveLoading:s,onSubmit:x,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},x=n(49513),v=n(43270),Z=n(45788),b=n(80197);var g=function(e){var t=(0,v.Gc)(),n=t.setValue,r=t.getValues,c=(0,l.useState)(!1),d=(0,a.Z)(c,2),u=d[0],m=d[1],h=(0,Z.v9)(b.Z.selectPermissionToCreate),g=function(){m(!1)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.Z,(0,o.Z)((0,o.Z)({},e),{},{fetchFn:function(e,t){return i.Z.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.id&&(n=e.label),{key:t,value:t,label:n}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){m(!0)},hasPermissionToCreate:h})),u&&(0,f.jsx)(p,{onClose:g,onSuccess:function(t){var o=e.name,a=e.mode;n(o,a&&"multiple"===a?[].concat((0,s.Z)(r()[o]||[]),[t]):t,{shouldValidate:!0,shouldDirty:!0}),g()}})]})}},5090:function(e,t,n){var o=n(1413),s=n(70885),a=n(47313),l=n(43270),i=n(10499),r=n(89994),c=n(95748),d=n(68160),u=n(6473),m=n(67357),h=n(47575),f=n(21538),p=n(85543),x=n(96111),v=n(46417),Z=u.Ry().shape({title:r.Z.string((0,i.ag)("entities.vip.fields.title"),{required:!0}),photo:r.Z.images((0,i.ag)("entities.vip.fields.photo"),{}),entrylimit:r.Z.string((0,i.ag)("entities.vip.fields.entrylimit"),{}),levellimit:r.Z.decimal((0,i.ag)("entities.vip.fields.levelLimit"),{required:!0}),dailyorder:r.Z.integer((0,i.ag)("entities.vip.fields.dailyorder"),{required:!0}),comisionrate:r.Z.decimal((0,i.ag)("entities.vip.fields.comisionrate"),{required:!0})});t.Z=function(e){var t=(0,a.useState)((function(){var t=e.record||{};return{title:t.title,photo:t.photo||[],entrylimit:t.entrylimit,levellimit:t.levellimit,dailyorder:t.dailyorder,comisionrate:t.comisionrate}})),n=(0,s.Z)(t,1)[0],r=(0,l.cI)({resolver:(0,m.X)(Z),mode:"all",defaultValues:n}),u=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return(0,v.jsx)(d.Z,{children:(0,v.jsx)(l.RV,(0,o.Z)((0,o.Z)({},r),{},{children:(0,v.jsxs)("form",{onSubmit:r.handleSubmit(u),children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(h.Z,{name:"title",label:(0,i.ag)("entities.vip.fields.title"),required:!0,autoFocus:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(p.Z,{name:"photo",label:(0,i.ag)("entities.paymentsettings.fields.photo"),required:!1,storage:x.Z.values.categoryPhoto,max:void 0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(f.Z,{name:"dailyorder",label:(0,i.ag)("entities.vip.fields.dailyorder"),required:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(f.Z,{name:"comisionrate",label:(0,i.ag)("entities.vip.fields.commissionrate"),required:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(h.Z,{name:"levellimit",label:(0,i.ag)("entities.vip.fields.levelLimit"),required:!0,autoFocus:!0})})]}),(0,v.jsxs)("div",{className:"form-buttons",children:[(0,v.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:r.handleSubmit(u),children:[(0,v.jsx)(c.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,i.ag)("common.save")]}),(0,v.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){r.setValue(e,n[e])}))},children:[(0,v.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,i.ag)("common.reset")]}),e.onCancel?(0,v.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,v.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,i.ag)("common.cancel")]}):null]})]})}))})}}}]);