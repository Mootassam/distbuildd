"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[5454],{4694:function(e,t,n){var s=n(76747),i=n(86495),a=n(26319),o=n(71945),l=(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsRead)})),r=(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsEdit)})),c=(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsCreate)})),d=(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsImport)})),u={selectPermissionToRead:l,selectPermissionToEdit:r,selectPermissionToCreate:c,selectPermissionToDestroy:(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsDestroy)})),selectPermissionToImport:d};t.Z=u},80197:function(e,t,n){var s=n(76747),i=n(86495),a=n(26319),o=n(71945),l=(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsRead)})),r=(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsEdit)})),c=(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsCreate)})),d=(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsImport)})),u={selectPermissionToRead:l,selectPermissionToEdit:r,selectPermissionToCreate:c,selectPermissionToDestroy:(0,s.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new a.Z(e,t).match(o.Z.values.couponsDestroy)})),selectPermissionToImport:d};t.Z=u},75454:function(e,t,n){n.d(t,{Z:function(){return x}});var s=n(1413),i=n(42982),a=n(70885),o=n(47313),l=n(54013),r=n(74165),c=n(15861),d=n(1168),u=n(10499),m=n(33512),v=n(34370),f=n(46417);var h=function(e){var t=(0,o.useRef)(),n=(0,o.useState)(!1),s=(0,a.Z)(n,2),i=s[0],h=s[1];(0,o.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var Z=function(){var n=(0,c.Z)((0,r.Z)().mark((function n(s,i){var a,o,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,l.Z.create(i);case 4:return a=n.sent,o=a.id,n.next=8,l.Z.find(o);case 8:c=n.sent,window.$(t.current).modal("hide"),e.onSuccess(c),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),m.Z.handle(n.t0);case 16:return n.prev=16,h(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return d.createPortal((0,f.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,f.jsx)("div",{className:"modal-dialog modal-lg",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h5",{className:"modal-title",children:(0,u.ag)("entities.product.new.title")}),(0,f.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,f.jsx)("span",{children:"\xd7"})})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)(v.Z,{saveLoading:i,onSubmit:Z,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},Z=n(49513),p=n(43270),g=n(45788),b=n(4694);var x=function(e){var t=(0,p.Gc)(),n=t.setValue,r=t.getValues,c=(0,o.useState)(!1),d=(0,a.Z)(c,2),u=d[0],m=d[1],v=(0,g.v9)(b.Z.selectPermissionToCreate),x=function(){m(!1)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Z.Z,(0,s.Z)((0,s.Z)({},e),{},{fetchFn:function(e,t){return l.Z.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.id&&(n=e.label),{key:t,value:t,label:n}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){m(!0)},hasPermissionToCreate:v})),u&&(0,f.jsx)(h,{onClose:x,onSuccess:function(t){var s=e.name,a=e.mode;n(s,a&&"multiple"===a?[].concat((0,i.Z)(r()[s]||[]),[t]):t,{shouldValidate:!0,shouldDirty:!0}),x()}})]})}},34370:function(e,t,n){var s=n(1413),i=n(70885),a=n(47313),o=n(43270),l=n(10499),r=n(89994),c=n(95748),d=n(68160),u=n(6473),m=n(67357),v=n(47575),f=n(21538),h=n(85543),Z=n(96111),p=n(99720),g=n(46417),b=u.Ry().shape({vip:r.Z.relationToOne((0,l.ag)("entities.product.fields.vip"),{required:!0}),title:r.Z.string((0,l.ag)("entities.product.fields.title"),{required:!0}),amount:r.Z.integer((0,l.ag)("entities.product.fields.amount"),{required:!0}),commission:r.Z.string((0,l.ag)("entities.product.fields.commission"),{required:!0}),photo:r.Z.images((0,l.ag)("entities.product.fields.photo"),{})});t.Z=function(e){var t=(0,a.useState)((function(){var t=e.record||{};return{title:t.title,amount:t.amount,commission:t.commission,vip:t.vip||[],photo:t.photo}})),n=(0,i.Z)(t,1)[0],r=(0,o.cI)({resolver:(0,m.X)(b),mode:"all",defaultValues:n}),u=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return(0,g.jsx)(d.Z,{children:(0,g.jsx)(o.RV,(0,s.Z)((0,s.Z)({},r),{},{children:(0,g.jsxs)("form",{onSubmit:r.handleSubmit(u),children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,g.jsx)(p.Z,{name:"vip",label:(0,l.ag)("entities.product.fields.vip"),required:!0,showCreate:!e.modal})}),(0,g.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,g.jsx)(v.Z,{name:"title",label:(0,l.ag)("entities.product.fields.title"),required:!0,autoFocus:!0})}),(0,g.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,g.jsx)(f.Z,{name:"amount",label:(0,l.ag)("entities.product.fields.amount"),required:!0})}),(0,g.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,g.jsx)(f.Z,{name:"commission",label:(0,l.ag)("entities.product.fields.commission"),required:!0})}),(0,g.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,g.jsx)(h.Z,{name:"photo",label:(0,l.ag)("entities.paymentsettings.fields.photo"),required:!1,storage:Z.Z.values.categoryPhoto,max:void 0})})]}),(0,g.jsxs)("div",{className:"form-buttons",children:[(0,g.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:r.handleSubmit(u),children:[(0,g.jsx)(c.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,l.ag)("common.save")]}),(0,g.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){r.setValue(e,n[e])}))},children:[(0,g.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,l.ag)("common.reset")]}),e.onCancel?(0,g.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,g.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,l.ag)("common.cancel")]}):null]})]})}))})}},99720:function(e,t,n){n.d(t,{Z:function(){return x}});var s=n(1413),i=n(42982),a=n(70885),o=n(47313),l=n(96988),r=n(74165),c=n(15861),d=n(1168),u=n(10499),m=n(33512),v=n(5090),f=n(46417);var h=function(e){var t=(0,o.useRef)(),n=(0,o.useState)(!1),s=(0,a.Z)(n,2),i=s[0],h=s[1];(0,o.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var Z=function(){var n=(0,c.Z)((0,r.Z)().mark((function n(s,i){var a,o,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,l.Z.create(i);case 4:return a=n.sent,o=a.id,n.next=8,l.Z.find(o);case 8:c=n.sent,window.$(t.current).modal("hide"),e.onSuccess(c),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),m.Z.handle(n.t0);case 16:return n.prev=16,h(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return d.createPortal((0,f.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,f.jsx)("div",{className:"modal-dialog modal-lg",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h5",{className:"modal-title",children:(0,u.ag)("entities.vip.new.title")}),(0,f.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,f.jsx)("span",{children:"\xd7"})})]}),(0,f.jsx)("div",{className:"modal-body",children:(0,f.jsx)(v.Z,{saveLoading:i,onSubmit:Z,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},Z=n(49513),p=n(43270),g=n(45788),b=n(80197);var x=function(e){var t=(0,p.Gc)(),n=t.setValue,r=t.getValues,c=(0,o.useState)(!1),d=(0,a.Z)(c,2),u=d[0],m=d[1],v=(0,g.v9)(b.Z.selectPermissionToCreate),x=function(){m(!1)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Z.Z,(0,s.Z)((0,s.Z)({},e),{},{fetchFn:function(e,t){return l.Z.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.id&&(n=e.label),{key:t,value:t,label:n}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){m(!0)},hasPermissionToCreate:v})),u&&(0,f.jsx)(h,{onClose:x,onSuccess:function(t){var s=e.name,a=e.mode;n(s,a&&"multiple"===a?[].concat((0,i.Z)(r()[s]||[]),[t]):t,{shouldValidate:!0,shouldDirty:!0}),x()}})]})}},5090:function(e,t,n){var s=n(1413),i=n(70885),a=n(47313),o=n(43270),l=n(10499),r=n(89994),c=n(95748),d=n(68160),u=n(6473),m=n(67357),v=n(47575),f=n(21538),h=n(85543),Z=n(96111),p=n(46417),g=u.Ry().shape({title:r.Z.string((0,l.ag)("entities.vip.fields.title"),{required:!0}),photo:r.Z.images((0,l.ag)("entities.vip.fields.photo"),{}),entrylimit:r.Z.string((0,l.ag)("entities.vip.fields.entrylimit"),{}),levellimit:r.Z.decimal((0,l.ag)("entities.vip.fields.levelLimit"),{required:!0}),dailyorder:r.Z.integer((0,l.ag)("entities.vip.fields.dailyorder"),{required:!0}),comisionrate:r.Z.decimal((0,l.ag)("entities.vip.fields.comisionrate"),{required:!0})});t.Z=function(e){var t=(0,a.useState)((function(){var t=e.record||{};return{title:t.title,photo:t.photo||[],entrylimit:t.entrylimit,levellimit:t.levellimit,dailyorder:t.dailyorder,comisionrate:t.comisionrate}})),n=(0,i.Z)(t,1)[0],r=(0,o.cI)({resolver:(0,m.X)(g),mode:"all",defaultValues:n}),u=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return(0,p.jsx)(d.Z,{children:(0,p.jsx)(o.RV,(0,s.Z)((0,s.Z)({},r),{},{children:(0,p.jsxs)("form",{onSubmit:r.handleSubmit(u),children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(v.Z,{name:"title",label:(0,l.ag)("entities.vip.fields.title"),required:!0,autoFocus:!0})}),(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(h.Z,{name:"photo",label:(0,l.ag)("entities.paymentsettings.fields.photo"),required:!1,storage:Z.Z.values.categoryPhoto,max:void 0})}),(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(f.Z,{name:"dailyorder",label:(0,l.ag)("entities.vip.fields.dailyorder"),required:!0})}),(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(f.Z,{name:"comisionrate",label:(0,l.ag)("entities.vip.fields.commissionrate"),required:!0})}),(0,p.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,p.jsx)(v.Z,{name:"levellimit",label:(0,l.ag)("entities.vip.fields.levelLimit"),required:!0,autoFocus:!0})})]}),(0,p.jsxs)("div",{className:"form-buttons",children:[(0,p.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:r.handleSubmit(u),children:[(0,p.jsx)(c.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,l.ag)("common.save")]}),(0,p.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){r.setValue(e,n[e])}))},children:[(0,p.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,l.ag)("common.reset")]}),e.onCancel?(0,p.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,p.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,l.ag)("common.cancel")]}):null]})]})}))})}}}]);