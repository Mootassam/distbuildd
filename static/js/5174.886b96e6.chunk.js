"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[5174],{47921:function(e,n,a){var r=a(76747),t=function(e){return e.user.form},l=(0,r.P1)([t],(function(e){return e.user})),s={selectInitLoading:(0,r.P1)([t],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,r.P1)([t],(function(e){return Boolean(e.saveLoading)})),selectUser:l,selectRaw:t};n.Z=s},63442:function(e,n,a){var r=a(17366),t={status:["active","empty-permissions"],genre:["male","female"],roles:Object.keys(r.Z.values)};n.Z=t},61567:function(e,n,a){a(47313);var r=a(46417);n.Z=function(){return(0,r.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,r.jsx)("div",{className:"spinner-border text-primary"})})}},49513:function(e,n,a){var r=a(1413),t=a(42982),l=a(74165),s=a(15861),o=a(70885),i=a(47313),u=a(49384),c=a(73622),d=a(10499),m=a(43270),f=a(35487),h=a.n(f),p=a(46417);function g(e){var n=(0,m.Gc)(),a=n.errors,f=n.watch,g=n.setValue,x=n.register,v=n.formState,b=v.touched,Z=v.isSubmitted,j=e.label,N=e.name,C=e.hint,y=e.placeholder,B=e.autoFocus,q=e.externalErrorMessage,S=e.mode,k=e.required,M=e.isClearable,V=e.mapper,P=e.fetchFn,w=e.election,F=f(N),L=(0,i.useState)([]),E=(0,o.Z)(L,2),O=E[0],D=E[1],I=(0,i.useState)(!1),A=(0,o.Z)(I,2),G=A[0],R=A[1];(0,i.useEffect)((function(){x({name:N})}),[x,N]),(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,l.Z)().mark((function e(){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,P();case 4:n=(n=e.sent).map((function(e){return V.toAutocomplete(e)})),D(n),R(!1),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),D([]),R(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e().then((function(){}))}),[]);var T=function(e){return(O||[]).find((function(n){return n.value===e.value}))||e},U=function(){return"multiple"===S?_():X()},_=function(){return F?F.map((function(e){return T(V.toAutocomplete(e))})):[]},X=function(){return F?T(V.toAutocomplete(F)):null},$=function(n){if(!n)return g(N,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var a=n.map((function(e){return V.toValue(e)}));g(N,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},z=function(n){if(!n)return g(N,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var a=V.toValue(n);g(N,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},H=G?(0,d.ag)("autocomplete.loading"):C,J=u.Z.errorMessage(N,a,b,Z,q),K=Boolean(J)?{control:function(e){return(0,r.Z)((0,r.Z)({},e),{},{borderColor:"red"})}}:void 0;return(0,p.jsxs)("div",{className:"form-group",children:[Boolean(j)&&(0,p.jsx)("label",{className:"col-form-label ".concat(k?"required":null),htmlFor:N,children:j}),(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(c.ZP,{className:"w-100",styles:K,id:N,name:N,isMulti:"multiple"===S,placeholder:y||"",autoFocus:B||void 0,onChange:function(e){return"multiple"===S?$(e):z(e)},value:U(),isClearable:M,options:function(){var n=e.mode;return O?U()?"multiple"===n?h()([].concat((0,t.Z)(O),(0,t.Z)(U())),"value"):h()([].concat((0,t.Z)(O),[U()]),"value"):O:[]}(),onBlur:function(n){e.onBlur&&e.onBlur(n)},loadingMessage:function(){return(0,d.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,d.ag)("autocomplete.noOptions")}}),w&&e.showCreate&&e.hasPermissionToCreate?(0,p.jsx)("button",{style:{marginLeft:"16px",flexShrink:0},className:"btn btn-primary",type:"button",onClick:e.onOpenModal,children:(0,p.jsx)("i",{className:"fas fa-plus"})}):null]}),(0,p.jsx)("div",{className:"invalid-feedback",children:J}),Boolean(H)&&(0,p.jsx)("small",{className:"form-text text-muted",children:H})]})}g.defaultProps={isClearable:!0,mode:"default",required:!1},n.Z=g},47575:function(e,n,a){a(47313);var r=a(43270),t=a(49384),l=a(46417);function s(e){var n=e.label,a=e.description,s=e.name,o=e.hint,i=e.type,u=e.placeholder,c=e.autoFocus,d=e.autoComplete,m=e.required,f=e.externalErrorMessage,h=e.disabled,p=e.endAdornment,g=(0,r.Gc)(),x=g.register,v=g.errors,b=g.formState,Z=b.touched,j=b.isSubmitted,N=t.Z.errorMessage(s,v,Z,j,f);return(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsxs)("div",{className:p?"input-group":"",children:[Boolean(n)&&(0,l.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:s,children:n}),a,(0,l.jsx)("input",{id:s,name:s,type:i,ref:x,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:u||void 0,autoFocus:c||void 0,autoComplete:d||void 0,disabled:h,className:"form-control ".concat(N?"is-invalid":"")}),p&&(0,l.jsx)("div",{className:"input-group-append",children:(0,l.jsx)("span",{className:"input-group-text",children:p})})]}),(0,l.jsx)("div",{className:"invalid-feedback",children:N}),Boolean(o)&&(0,l.jsx)("small",{className:"form-text text-muted",children:o})]})}s.defaultProps={type:"text",required:!1},n.Z=s},21538:function(e,n,a){a(47313);var r=a(43270),t=a(49384),l=a(46417);function s(e){var n=e.label,a=e.name,s=e.hint,o=e.type,i=e.placeholder,u=e.autoFocus,c=e.autoComplete,d=e.required,m=e.externalErrorMessage,f=e.disabled,h=(0,r.Gc)(),p=h.register,g=h.errors,x=h.formState,v=x.touched,b=x.isSubmitted,Z=t.Z.errorMessage(a,g,v,b,m);return(0,l.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,l.jsx)("label",{className:"col-form-label ".concat(d?"required":null),htmlFor:a,children:n}),(0,l.jsx)("input",{id:a,name:a,type:o,ref:p,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:i||void 0,autoFocus:u||void 0,autoComplete:c||void 0,disabled:f,className:"form-control ".concat(Z?"is-invalid":"")}),(0,l.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(s)&&(0,l.jsx)("small",{className:"form-text text-muted",children:s})]})}s.defaultProps={type:"number",required:!1},n.Z=s},5544:function(e,n,a){var r=a(1413),t=a(47313),l=a(73622),s=a(10499),o=a(43270),i=a(49384),u=a(46417);function c(e){var n=e.label,a=e.name,c=e.hint,d=e.options,m=e.required,f=e.mode,h=e.placeholder,p=e.isClearable,g=e.externalErrorMessage,x=(0,o.Gc)(),v=x.register,b=x.errors,Z=x.formState,j=Z.touched,N=Z.isSubmitted,C=x.setValue,y=x.watch,B=i.Z.errorMessage(a,b,j,N,g),q=y(a);(0,t.useEffect)((function(){v({name:a})}),[v,a]);var S=function(){return q?q.map((function(e){return d.find((function(n){return n.value===e}))})):[]},k=function(){var n=e.options;return null!=q?n.find((function(e){return e.value===q})):null},M=function(n){if(!n)return C(a,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var r=n.map((function(e){return e?e.value:e})).filter((function(e){return null!=e}));C(a,r,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(r)},V=function(n){if(!n)return C(a,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));C(a,n.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.value)},P=Boolean(B)?{container:function(e){return(0,r.Z)((0,r.Z)({},e),{},{color:"hsl(0,0%,20%)"})},control:function(e){return(0,r.Z)((0,r.Z)({},e),{},{borderColor:"red"})}}:{container:function(e){return(0,r.Z)((0,r.Z)({},e),{},{color:"hsl(0,0%,20%)"})}};return(0,u.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,u.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:n}),(0,u.jsx)("br",{}),(0,u.jsx)(l.ZP,{className:"w-100",value:"multiple"===e.mode?S():k(),onChange:function(n){return"multiple"===e.mode?M(n):V(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},id:a,name:a,options:d,isMulti:"multiple"===f,placeholder:h||"",isClearable:p,styles:P,loadingMessage:function(){return(0,s.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,s.ag)("autocomplete.noOptions")}}),(0,u.jsx)("div",{className:"invalid-feedback",children:B}),Boolean(c)&&(0,u.jsx)("small",{className:"form-text text-muted",children:c})]})}c.defaultProps={required:!1,isClearable:!0},n.Z=c},35185:function(e,n,a){a.r(n),a.d(n,{default:function(){return E}});var r=a(70885),t=a(47313),l=a(45788),s=a(63830),o=a(10499),i=a(30124),u=a(541),c=a(47921),d=a(27829),m=a(53852),f=a(61567),h=a(75352),p=a(1413),g=a(43270),x=a(5544),v=a(68160),b=a(95748),Z=a(6473),j=a(89994),N=a(63442),C=a(67357),y=a(47575),B=a(63849),q=a(31616),S=a(85543),k=a(96111),M=a(99720),V=a(75454),P=a(21538),w=a(46417),F=Z.Ry().shape({roles:j.Z.stringArray((0,o.ag)("user.fields.roles"),{min:1}),phoneNumber:j.Z.string((0,o.ag)("phoneNumber"),{max:24}),adresse:j.Z.string((0,o.ag)("adresse"),{required:!1}),fullName:j.Z.string((0,o.ag)("fullName"),{required:!1}),balance:j.Z.string((0,o.ag)("balance"),{required:!1}),product:j.Z.relationToOne((0,o.ag)("prodcut"),{}),itemNumber:j.Z.integer((0,o.ag)("itemNumber"),{required:!1}),status:j.Z.enumerator((0,o.ag)("user.fields.status"),{options:N.Z.status})});var L=function(e){var n=(0,l.I0)(),a=(0,t.useState)((function(){var n=e.user||{};return{roles:n.roles[0],phoneNumber:n.phoneNumber,passportNumber:n.passportNumber,fullName:n.fullName,firstName:n.firstName,lastName:n.lastName,country:n.country,balance:n.balance,state:n.state,passportPhoto:n.passportPhoto||[],vip:n.vip||[],status:n.status,product:n.product||[],itemNumber:n.itemNumber}})),s=(0,r.Z)(a,1)[0],i=(0,g.cI)({resolver:(0,C.X)(F),mode:"all",defaultValues:s}),c=function(a){var r=(0,p.Z)({id:e.user.id},a);delete r.email,n(u.Z.doUpdate(r))};return(0,w.jsx)(v.Z,{children:(0,w.jsx)(g.RV,(0,p.Z)((0,p.Z)({},i),{},{children:(0,w.jsxs)("form",{onSubmit:i.handleSubmit(c),children:[(0,w.jsxs)(B.Z,{style:{paddingBottom:"10px",display:"grid"},children:[(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{className:"col-form-label",htmlFor:"email",children:(0,o.ag)("user.fields.email")}),(0,w.jsx)("input",{type:"text",readOnly:!0,className:"form-control-plaintext",id:"email",name:"email",value:e.user.email})]})}),(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsx)(x.Z,{name:"roles",label:(0,o.ag)("user.fields.roles"),required:!0,options:N.Z.roles.map((function(e){return{value:e,label:(0,o.ag)("".concat(e))}}))})}),(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsx)(x.Z,{name:"status",label:(0,o.ag)("user.fields.status"),options:N.Z.status.map((function(e){return{value:e,label:(0,o.ag)("user.status.".concat(e))}}))})})]}),(0,w.jsx)(B.Z,{children:(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsx)(y.Z,{name:"balance",label:(0,o.ag)("user.fields.balance"),required:!0})})}),(0,w.jsx)(B.Z,{children:(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsx)(M.Z,{name:"vip",label:(0,o.ag)("entities.product.fields.vip"),required:!0,showCreate:!e.modal})})}),(0,w.jsx)(B.Z,{children:(0,w.jsx)(S.Z,{name:"passportPhoto",label:(0,o.ag)("user.fields.passportphoto"),storage:k.Z.values.galleryPhotos,max:2})}),(0,w.jsx)(B.Z,{children:(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsx)(y.Z,{name:"fullName",label:(0,o.ag)("user.fields.fullName"),required:!0})})}),(0,w.jsx)(B.Z,{children:(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsx)(y.Z,{name:"phoneNumber",label:(0,o.ag)("user.fields.phoneNumber"),required:!0})})}),(0,w.jsx)(B.Z,{children:(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsx)(y.Z,{name:"country",label:(0,o.ag)("user.fields.country"),required:!0})})}),(0,w.jsx)(B.Z,{children:(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsx)(V.Z,{name:"product",label:(0,o.ag)("user.fields.product")})})}),(0,w.jsx)(B.Z,{children:(0,w.jsx)(q.Z,{sm:4,children:(0,w.jsx)(P.Z,{name:"itemNumber",label:(0,o.ag)("user.fields.itemNumber"),required:!0})})}),(0,w.jsxs)("div",{className:"form-buttons",children:[(0,w.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:i.handleSubmit(c),children:[(0,w.jsx)(b.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,o.ag)("common.save")]}),(0,w.jsxs)("button",{className:"btn btn-light",disabled:e.saveLoading,onClick:function(){Object.keys(s).forEach((function(e){i.setValue(e,s[e])}))},type:"button",children:[(0,w.jsx)("i",{className:"fas fa-undo"}),(0,o.ag)("common.reset")]}),e.onCancel?(0,w.jsxs)("button",{className:"btn btn-light",disabled:e.saveLoading,onClick:function(){return e.onCancel()},type:"button",children:[(0,w.jsx)("i",{className:"fas fa-times"}),(0,o.ag)("common.cancel")]}):null]})]})}))})};var E=function(e){var n=(0,l.I0)(),a=(0,t.useState)(!1),p=(0,r.Z)(a,2),g=p[0],x=p[1],v=(0,l.v9)(c.Z.selectInitLoading),b=(0,l.v9)(c.Z.selectSaveLoading),Z=(0,l.v9)(c.Z.selectUser),j=(0,s.$B)(),N=Boolean(j.params.id);return(0,t.useEffect)((function(){n(u.Z.doInit(j.params.id)),x(!0)}),[n,j.params.id]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.Z,{items:[[(0,o.ag)("dashboard.menu"),"/"],[(0,o.ag)("user.menu"),"/user"],[(0,o.ag)("user.edit.title")]]}),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{children:(0,o.ag)("user.edit.title")}),v&&(0,w.jsx)(f.Z,{}),g&&!v&&(0,w.jsx)(L,{user:Z,saveLoading:b,isEditing:N,onCancel:function(){return(0,i.s1)().push("/user")}})]})]})}}}]);